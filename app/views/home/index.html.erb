<div class="w-full bg-[#b2856f]">
  <div class="hero-container">
    <%= image_tag "bg.png", alt: "", class: "hero-bg" %>
    <%= image_tag "pic.svg", alt: "Profile photo", class: "hero-profile" %>
    <%= image_tag "profile_logo.svg", alt: "NN'S QUEST", class: "hero-logo" %>
    <%= link_to brag_path, class: "hero_brag" do %>
      <%= image_tag "brag_button.svg", alt: "NN'S QUEST" %>
    <% end %>
  </div>

  <div class="task_container">
        <%= form_with model: @task, url: tasks_path, method: :post, local: true, class: "flex flex-col md:flex-row md:items-start md:gap-4 mb-6" do |form| %>
        
        <!-- Field + error -->
        <div class="w-full md:flex-1 flex flex-col">
            <%= form.text_field :title,
                placeholder: "เพิ่มเควสต์ของฉัน",
                class: "border px-3 py-2 rounded w-full" %>

        </div>

        <!-- Button -->
        <%= form.submit "เพิ่ม", 
            class: "bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700 w-full md:w-auto mt-2 md:mt-0", 
            data: { testid: "submit-quest" } %>
        <% end %>

        <!-- Quest List -->
        <div>
            <ul class="space-y-3">
            <% @task.each do |task| %>
                <li id="<%= dom_id(task) %>" class="flex justify-between items-start bg-gray-100 px-4 py-3 rounded">
                    <%= form_with model: task, url: toggle_status_task_path(task), method: :patch, data: { turbo_stream: true }, class: "flex items-start gap-3 flex-1 min-w-0" do |form| %>
                        <div class="flex items-start gap-3 flex-1 min-w-0">
                        <label for="task_<%= task.id %>" 
                                class="text-base md:text-lg break-words whitespace-normal overflow-hidden <%= "line-through text-gray-500" if task.status %>">
                            <%= task.content %>
                        </label>
                        </div>

                        <!-- Right: checkbox + delete -->
                        <div class="flex justify-end items-center gap-3 shrink-0">
                        <%= form.check_box :status, { checked: task.status, class: "w-5 h-5", id: "task_#{task.id}", onchange: "this.form.requestSubmit()" } %>
                        <button class="group">
                            <%= image_tag "delete.svg", alt: "Delete", class: "w-6 h-6 group-hover:opacity-60 transition-opacity duration-100" %>
                        </button>
                        </div>
                    <% end %>
                </li>
            <% end %>
            </ul>
        </div>
  </div>
</div>
